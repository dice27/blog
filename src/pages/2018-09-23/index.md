---
title: 【Linux】シェル内でのみ使うファイル/ディレクトリを作る
date: "2018-09-23"
---

![Anteater](./anteater.jpg)  

---

## シェル内でのみ使うファイル/ディレクトリを作る

`mktemp` コマンドを利用すると、適当な名前のファイル/ディレクトリを作ることができます。  
また、作成されるディレクトリもデフォルトでは `/tmp` 配下。

`mktemp` コマンドは、ランダムな名前でファイル/ディレクトリを作成するのですが、  
標準出力にその結果を返してくれるので、基本的にサブシェルで実行したものを変数に格納して使うのが良いです。

```sh
# /tmp 配下にランダムな名前のファイルが作成される。
temp_file=$(mktemp)

# -d を付けることでディレクトリ作成となる。
temp_dir=$(mktemp -d)
```

### 想定されるユースケース

trapコマンドと組み合わせて、シェルスクリプトが動作している間だけ生きているファイル/ディレクトリを作成。

```sh
# 一時ディレクトリ/ファイルを作成する。
temp_file=$(mktemp)
temp_dir=$(mktemp -d)

# 後始末を定義
trap "
rm $temp_file
rm $temp_dir
" 0
```
