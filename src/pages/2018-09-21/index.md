---
title: 【Linux】実行しているシェル自身のディレクトリの取得
date: "2018-09-21"
---

![Squirre](./squirre.jpg)  

---

## 実行しているシェル自身のディレクトリの取得

シェルスクリプトは、原則として自分自身を実行した際のカレントディレクトリが、  
そのままシェルスクリプト内のカレントディレクトリとして扱われる。

そうすると、例えばシェルからシェルを呼びたいときとか相対パスが使いにくいので結構辛い。  
(だからと言って絶対パスにするなんて、環境依存になる為、論外。)_  

ですので、自身の周辺のディレクトリ/ファイル構造が決められてたりすると本当に辛い。

そこで、こういう場合にはスクリプト自身の絶対パスを動的に取得する方法が有用です。  
以下の様に書いてあげるとOKです！

```sh
script_dir_path=$(dirname $(readlink -f $0))
```

 *※注意*
BSDとかOSXでは `readlink` の実装が異なる為、使えない。
その場合は coreutils の `greadlink` を利用する事。

```sh
script_dir_path=$(dirname $(greadlink -f $0))
```

 *※ 簡単な解説*

`$0` で実行されたパスから自分のファイルへの相対パスを取得して、それを `dirname` に渡してディレクトリ名を抽出。  
それをさらに `readlink -f` に渡してあげることで、  
シェルスクリプト自身が置かれているディレクトリへの絶対パスがシステムに依存しないで動的に取得できる。
